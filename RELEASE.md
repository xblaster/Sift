# Sift Release & Delivery Guide

This document outlines how to build, package, and release the **Sift** application.

## 1. Prerequisites (Local Build)

To build **Sift** from source, you need the Rust toolchain installed.

1.  **Install Rust**:
    -   Go to [rustup.rs](https://rustup.rs/) and download `rustup-init.exe`.
    -   Follow the installation instructions (default options are usually fine).
2.  **Verify Installation**:
    ```powershell
    cargo --version
    rustc --version
    ```

## 2. Building for Release

To create an optimized binary for distribution:

```powershell
cargo build --release
```

The resulting binary will be located at:
`target/release/sift.exe` (Windows)
`target/release/sift` (Linux/macOS)

### Troubleshooting
If you encounter linker errors on Windows, ensure you have the **C++ build tools** installed via Visual Studio Installer (Desktop development with C++).

## 3. Creating an Installer (Windows)

We use [Inno Setup](https://jrsoftware.org/isinfo.php) to create a professional Windows installer (`setup.exe`).

1.  **Install Inno Setup Compiler**.
2.  **Build the Release Binary**:
    ```powershell
    cargo build --release
    ```
3.  **Compile the Script**:
    -   Open `installer/sift.iss` with Inno Setup Compiler.
    -   Click **Build** -> **Compile**.
4.  **Output**:
    -   The installer will be generated in the `installer/Output` folder (e.g., `sift_setup.exe`).

### Installer Script Configuration (`installer/sift.iss`)

This script defines how the installer is built. You can customize the `MyAppVersion`, `MyAppPublisher`, and other defines at the top of the file.

```ini
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "Sift"
#define MyAppVersion "0.1.0"
#define MyAppPublisher "Your Company"
#define MyAppURL "https://github.com/yourusername/sift"
#define MyAppExeName "sift.exe"

[Setup]
AppId={{C626F763-7145-4209-8C79-880621430062}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={autopf}\{#MyAppName}
DisableProgramGroupPage=yes
OutputDir=Output
OutputBaseFilename=sift_setup
Compression=lzma
SolidCompression=yes
WizardStyle=modern

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"
Name: "french"; MessagesFile: "compiler:Languages\French.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked

[Files]
Source: "..\target\release\{#MyAppExeName}"; DestDir: "{app}"; Flags: ignoreversion

[Icons]
Name: "{autoprograms}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{autodesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent
```

## 4. Automated Releases (GitHub Actions)

This repository includes a GitHub Action (`.github/workflows/release.yml`) that automatically builds binaries for **Windows, macOS, and Linux** when you push a new tag.

### How to Trigger a Release

1.  **Commit your changes**.
2.  **Tag the commit**:
    ```bash
    git tag v0.1.0
    git push origin v0.1.0
    ```
3.  **Check Actions**: Go to the "Actions" tab in your GitHub repository. You should see a "Release" workflow running.
4.  **Download Assets**: Once finished, a new Release will be created on the "Releases" page with the compiled binaries attached.
